---
layout: post
title: MySQL (2)
published: false
date:   2022-11-04
description: 서브쿼리
toc: true
comments: true
tags:
 - mysql
---
---
# 12.서브 쿼리
괄로호 묶어야 함, 대상은 alias를 줘야함

## SELECT 절에서의 서브 쿼리
조건
출력되는 서브 쿼리는 하나의 컬럼을 출력해야한다
alias가 필수는 아니지만 너무 길어짐
바깥 쿼리의 컬럼마다 서브쿼리가 실행되어 성능면으로 좋지 않으므로 비추

## FROM 절에서의 서브 쿼리
alias가 필수이다


## WHERE 절에서의 서브 쿼리

연산자에 따라 서브 쿼리 출력결과를 주의
(IN 연산자 뒤에는 여러 결과가 올 수 있다.)

# 14.데이터 입력
## 뷰 생성
뷰 사용 주의점
데이터가 아니라 실시간으로 데이터를 모아서 보여주는 것
뷰는 실제 테이블이 아님
기본적으로 SELECT 전용으로 사용할것 
(데이터를 조작가능하지만...)

## INSERT INTO SELECT
SELECT 결과로 생성



>백업
mysql -ustudent -p -h192.168.56.100 student < c:\data.txt

>덤프
mysqldump -uroot -p student > student.sql

>복원
mysql -uroot -p student < student.sql

>데이터만 덤프
mysqldump -uroot -p --no-create-info student > data.sql

>데이터 제외 테이블만 덤프
mysqldump -uroot -p --no-data student > create.sql

>덤프 옵션 도움말
mysqldump --help | less

Transaction 설정
일련의 절차를 가지는 작업의 단위
커밋, 롤백
세이브포인트

환경변수는 세션별로 각각 설정된다
SET AUTOCOMMIT=0;
SHOW VARIABLES LIKE 'AUTO%';
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| auto_generate_certs      | ON    |
| auto_increment_increment | 1     |
| auto_increment_offset    | 1     |
| autocommit               | OFF   |
| automatic_sp_privileges  | ON    |
+--------------------------+-------+
DELETE FROM book;
SELECT * FROM book;
ROLLBACK;

데이터 백업..
CREATE TABLE book2 AS SELECT * FROM book;

새로운 트랜젝션 시작
START TRANSACTION;

적용 후 트랜젝션 재시작
COMMIT

InnoDB 엔진이 지원

트랜젝션을 커밋하기 전까지는 다른 유저에게는 바뀐내용이 보이지 않음

# 15.데이터 편집
SELECT * FROM category;
+--------+-----------+
| c_code | c_name    |
+--------+-----------+
| FT     | 소설      |
| LF     | 라노벨    |
| RE     | 참고서    |
+--------+-----------+

UPDATE category SET c_name = '레퍼런스' WHERE c_code = 'RE';
+--------+--------------+
| c_code | c_name       |
+--------+--------------+
| FT     | 소설         |
| LF     | 라노벨       |
| RE     | 레퍼런스     |
+--------+--------------+

참조의 무결성으로 UPDATE시에 부모테이블과 자식테이들 둘다 제약을 받는다.
(INSERT는 자식만 DELETE는 부모만)

## JOIN을 통한 편집 
SQL 구문 참조


## JOIN을 통한 삭제




# 18.데이터베이스 모델링

업무분석 - 개념설계 - 논리설계 - 물리설계


# 물리설계 해보기
CREATE USER project IDENTIFIED BY 'Iloveyou7!';
CREATE DATABASE project;
GRANT all privileges ON project.* TO project;




77p LOAD DATA INFILE

mysql --local-infile=1 -u root -p

LOAD DATA LOCAL INFILE 'dept.CSV' INTO TABLE dept
FIELDS TERMINATED BY ',' # default ,
OPTIONALLY ENCLOSED BY '\'' # default \n
LINES TERMINATED BY '\n' # default \n
IGNORE 1 LINES;

LOAD DATA LOCAL INFILE 'sawon.CSV' INTO TABLE dept
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '\''
LINES TERMINATED BY '\n'
IGNORE 1 LINES;










![img]({{ '/assets/images/2022/11/02/img01.PNG' | relative_url }}){: .left-image }

{% highlight bash %}
bash
{% endhighlight bash %}


---
# Reference
누구: [어디](하이퍼링크)
{: style="text-align: right"}